
This file Documents the sequence step to add custom instruction into the riscv toolchain
File contributor: Mukund Vijayvergiya<mukundv.cs22@rvce.edu.in>/S SAHANA <ssahana.cs22@rvce.edu.in>

Instruction to be added:

```
mod r1, r2, r3
R[r1] = R[r2] % R[r3]
```

#1.  Clone the RISC-V opcodes repository: 
```
   git clone --depth 1 https://github.com/riscduino/riscv-opcodes.git
```

#2. Adding the instruction to the RISC-V opcodes repository:
Since mod  operation is an integer related function it should be added to rv_i  file in the opcode repository.   
```
gvim rv_i and append text “mod  rd rs1 rs2 31..25=1  14..12=0 6..2=2    1..0=3”
```


#3. Run make command to obtain MATCH and MASK  values. These values are present in the encoding.out.h file generated by parse.py.

```
make
gvim encoding.out.h and check the “MATCH_MOD” and “MASK_MOD”
```
<table> <tr> <td  align="center"><img src="./docs/images/CustomInstruction.AddInstruction.png" ></td> </tr> </table>
<table> <tr> <td  align="center"><img src="./docs/images/CustomInstruction.Encoding.png" ></td> </tr> </table>
<table> <tr> <td  align="center"><img src="./docs/images/CustomInstruction.GccOutput.png" ></td> </tr> </table>



```
ls /opt/riscv64_expt/bin/
```

```
riscv64-unknown-linux-gnu-addr2line  riscv64-unknown-linux-gnu-gcc         riscv64-unknown-linux-gnu-gdb            riscv64-unknown-linux-gnu-objcopy
riscv64-unknown-linux-gnu-ar         riscv64-unknown-linux-gnu-gcc-13.2.1  riscv64-unknown-linux-gnu-gdb-add-index  riscv64-unknown-linux-gnu-objdump
riscv64-unknown-linux-gnu-as         riscv64-unknown-linux-gnu-gcc-ar      riscv64-unknown-linux-gnu-gfortran       riscv64-unknown-linux-gnu-ranlib
riscv64-unknown-linux-gnu-c++        riscv64-unknown-linux-gnu-gcc-nm      riscv64-unknown-linux-gnu-gprof          riscv64-unknown-linux-gnu-readelf
riscv64-unknown-linux-gnu-c++filt    riscv64-unknown-linux-gnu-gcc-ranlib  riscv64-unknown-linux-gnu-ld             riscv64-unknown-linux-gnu-run
riscv64-unknown-linux-gnu-cpp        riscv64-unknown-linux-gnu-gcov        riscv64-unknown-linux-gnu-ld.bfd         riscv64-unknown-linux-gnu-size
riscv64-unknown-linux-gnu-elfedit    riscv64-unknown-linux-gnu-gcov-dump   riscv64-unknown-linux-gnu-lto-dump       riscv64-unknown-linux-gnu-strings
riscv64-unknown-linux-gnu-g++        riscv64-unknown-linux-gnu-gcov-tool   riscv64-unknown-linux-gnu-nm             riscv64-unknown-linux-gnu-strip

```


```
/opt/riscv64_expt/bin/riscv64-unknown-linux-gnu-gcc mod_test.c 

```
